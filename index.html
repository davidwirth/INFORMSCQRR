<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      @import url('css/jquery.mobile-1.4.2.min.css');
      @import url('css/jquery.mobile.theme-1.4.2.min.css');
      @import url('css/style.css');
    </style>
    <script src="phonegap.js"></script>
    <script src="barcodescanner.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/jquery.mobile-1.4.2.min.js"></script>
    <script type="text/javascript">
      function scan() {
        var scanner = cordova.require("cordova/plugin/BarcodeScanner");
        scanner.scan(
          function (result) {
            var pattern = /ID#\s?(\d{1,7})/;
            var member_id = pattern.exec( result.text );
            if (!member_id[1] || isNaN(member_id[1])) alert("There was no member ID found in the scanned QR code.");
            else {
              alert(member_id[1]);
            }
          }, 
          function (error) {
            alert("Scanning failed: " + error);
          }
        );
      }
    </script>
  </head>
  <body>
    <div data-role="page">
      <div data-role="header">
        INFORMS Event QR Scanner
      </div>
      <button onclick="scan()">test</button>
      <div data-role="footer" data-position="fixed">
        INFORMS
      </div>
    </div><!-- page -->
  </body>
</html>
